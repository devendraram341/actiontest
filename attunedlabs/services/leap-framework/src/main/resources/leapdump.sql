CREATE MEMORY TABLE CONFIGNODE(NODEID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,NODENAME VARCHAR(255) DEFAULT NULL,ISROOT BOOLEAN DEFAULT NULL,HASCHILDREN BOOLEAN DEFAULT NULL,PARENTNODEID INTEGER DEFAULT NULL,DESCRIPTION VARCHAR(255) DEFAULT NULL,TYPE VARCHAR(255) DEFAULT NULL,LEVEL INTEGER NOT NULL,VERSION VARCHAR(20) DEFAULT NULL,PRIMARYFEATUREID INTEGER DEFAULT NULL);
CREATE MEMORY TABLE FEATUREMASTER(FEATUREMASTERID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,FEATURENAME VARCHAR(50) NOT NULL,FEATUREGROUP VARCHAR(50) NOT NULL,SITEID INTEGER NOT NULL ,VERSION VARCHAR(20) DEFAULT NULL,DESCRIPTION VARCHAR(200) DEFAULT NULL,MULTIVENDORSUPPORT BOOLEAN DEFAULT NULL,ALLOWMULTIPLEIMPL BOOLEAN DEFAULT NULL,PRODUCT VARCHAR(100) NOT NULL,CONSTRAINT SYS_CT_48 UNIQUE(SITEID,FEATURENAME,FEATUREGROUP,VERSION),CONSTRAINT SYS_FK_49 FOREIGN KEY(SITEID) REFERENCES CONFIGNODE(NODEID));
CREATE MEMORY TABLE CUSTOMERACCOUNT(ACCOUNTID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,ACCOUNTNAME VARCHAR(50) NOT NULL,SALTSECRETKEY VARCHAR(50) NOT NULL,INTERNALTENANTID VARCHAR(50) NOT NULL,DESCRIPTION VARCHAR(50) DEFAULT NULL,TENANTTOKENEXPIRATION INTEGER NOT NULL,CONSTRAINT SYS_CT_55 UNIQUE(ACCOUNTNAME),CONSTRAINT SYS_CT_56 UNIQUE(ACCOUNTNAME,INTERNALTENANTID));
CREATE MEMORY TABLE CUSTOMERSITE(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,ACCOUNTID INTEGER NOT NULL,SITEID VARCHAR(50) NOT NULL,DOMAIN VARCHAR(50) NOT NULL,DESCRIPTION VARCHAR(50) NOT NULL,TIMEZONE VARCHAR(45) NOT NULL,CONSTRAINT SYS_CT_61 UNIQUE(SITEID,DOMAIN),CONSTRAINT SYS_CT_62 UNIQUE(ACCOUNTID,SITEID),CONSTRAINT SYS_FK_63 FOREIGN KEY(ACCOUNTID) REFERENCES CUSTOMERACCOUNT(ACCOUNTID));
CREATE MEMORY TABLE DOMAINADMIN(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,DOMAINID INTEGER DEFAULT NULL,ADMINUSERNAME VARCHAR(100) NOT NULL,ADMINPASSWORD VARCHAR(100) NOT NULL,ENCRIPTEDFORM VARCHAR(500) DEFAULT NULL,CONSTRAINT SYS_FK_70 FOREIGN KEY(DOMAINID) REFERENCES CUSTOMERSITE(ID));
CREATE MEMORY TABLE USERDOMAIN(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,USERNAME VARCHAR(50) NOT NULL,DOMAINID INTEGER NOT NULL,CONSTRAINT SYS_FK_75 FOREIGN KEY(DOMAINID) REFERENCES CUSTOMERSITE(ID));
CREATE MEMORY TABLE CONFIGNODEDATA(NODEDATAID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,NODEID INTEGER NOT NULL,CONFIGNAME VARCHAR(100) NOT NULL,CONFIGDATA VARCHAR(50000) DEFAULT NULL,CONFIGTYPE VARCHAR(20) NOT NULL,CONFIGSTATUS VARCHAR(50) NOT NULL,ISENABLED INTEGER NOT NULL,CREATEDDTM TIMESTAMP NOT NULL,FAILUREMSG VARCHAR(220) DEFAULT NULL,CONSTRAINT SYS_FK_80 FOREIGN KEY(NODEID) REFERENCES CONFIGNODE(NODEID));
CREATE MEMORY TABLE FEATUREDEPLOYMENT(FEATUREDEPLOYMENTID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,FEATUREMASTERID INTEGER NOT NULL,FEATURENAME VARCHAR(50) NOT NULL,IMPLEMENTATIONNAME VARCHAR(50) NOT NULL,VENDORNAME VARCHAR(50) NOT NULL,FEATUREVERSION VARCHAR(20) DEFAULT NULL,ISACTIVE BOOLEAN DEFAULT NULL,ISPRIMARY BOOLEAN DEFAULT NULL,ISCUSTOMIZED BOOLEAN DEFAULT NULL,PROVIDER VARCHAR(255) DEFAULT NULL,VENDORTAXONOMYID VARCHAR(255) DEFAULT NULL,CONSTRAINT SYS_FK_85 FOREIGN KEY(FEATUREMASTERID) REFERENCES FEATUREMASTER(FEATUREMASTERID));
CREATE MEMORY TABLE EVENTDISPATCHTRACKER(TENANTID VARCHAR(50) NOT NULL,SITEID VARCHAR(50) NOT NULL,LEAPEVENTID VARCHAR(50) NOT NULL,REQUESTID VARCHAR(100) NOT NULL,LEAPEVENT VARCHAR(15000),EVENTSTOREID VARCHAR(50) NOT NULL,EVENTCREATEDDTM TIMESTAMP DEFAULT NULL,LASTFAILUREDTM TIMESTAMP DEFAULT NULL,STATUS VARCHAR(25) NOT NULL,FAILUREREASON VARCHAR(20000) DEFAULT NULL,RETRYCOUNT INTEGER DEFAULT NULL,DISPATCHCHANNELID VARCHAR(250) NOT NULL,CONSTRAINT SYS_CT_90 UNIQUE(TENANTID,SITEID,LEAPEVENTID,REQUESTID));
CREATE MEMORY TABLE ALLTENANTSCHEDULEDJOBREQUEST(JOBID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,JOBNAME VARCHAR(255) DEFAULT NULL,JOBSERVICE VARCHAR(255) DEFAULT NULL,JOBTYPE VARCHAR(255) DEFAULT NULL,FEATUREGROUP VARCHAR(255) DEFAULT NULL,FEATURE VARCHAR(255) DEFAULT NULL,JOBCONTEXTDETAIL VARCHAR(255) DEFAULT NULL,SCHEDULINGEXPRESSSION VARCHAR(255) DEFAULT NULL,CREATEDDTM VARCHAR(255) DEFAULT NULL,ISENABLED BOOLEAN DEFAULT NULL,ISCONCURRENT BOOLEAN DEFAULT NULL,ISAUTHENTICATED BOOLEAN DEFAULT NULL,ALLAPPLICABLETENANT BOOLEAN DEFAULT NULL,STATUS VARCHAR(255) DEFAULT NULL,REQUESTEDBY VARCHAR(255) DEFAULT NULL);
CREATE MEMORY TABLE PRETTYURLMAPPING (ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,TENANTID VARCHAR(45) NOT NULL,SITEID VARCHAR(45) NOT NULL,PRETTYSTRING VARCHAR(250) NOT NULL,ACTUALSTRING VARCHAR(600) NOT NULL,PRIMARY KEY (ID),UNIQUE(PRETTYSTRING));
CREATE MEMORY TABLE EVENTSUBSCRIPTIONTRACKER (TENANTID VARCHAR(100) DEFAULT NULL, SITEID VARCHAR(100) DEFAULT NULL,SUBSCRIPTIONID VARCHAR(200) DEFAULT NULL,TOPIC VARCHAR(150) DEFAULT NULL,TOPICPARTITION VARCHAR(50) DEFAULT NULL,TOPICOFFSET VARCHAR(50) DEFAULT NULL,EVENTDATA VARCHAR(15000) DEFAULT NULL,EVENTFETCHEDDTM TIMESTAMP DEFAULT NULL,LASTFAILUREDTM TIMESTAMP DEFAULT NULL,FAILUREMSG VARCHAR(500) DEFAULT NULL,STATUS VARCHAR(45) DEFAULT NULL,ISRETRYABLE INTEGER DEFAULT NULL,RETRYCOUNT INTEGER DEFAULT NULL);
INSERT INTO CONFIGNODE VALUES(1,'all',true,true,0,'globalTenant','tenant',1,'1.0',0);
INSERT INTO CONFIGNODE VALUES(2,'all',false,true,1,'globalSite','site',2,'1.0',0);
INSERT INTO CUSTOMERACCOUNT VALUES(1,'ALL','12@42q2','all','all description',3600);
INSERT INTO CUSTOMERSITE VALUES(1,1,'all','carbon.super','carbon.super & all','IST');